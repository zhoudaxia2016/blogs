## JS实现轮播图

> 应该许多网站的首页都会有轮播图，用来展示最新的消息。今天我们来实现一个轮播图。

轮播图是一个实现网站信息展示的常用的方法，通常在首页最显眼的位置，一般会自动播放一些图片。图片的播放方式可以有很多种，我只是实现了水平滚动与垂直滚动，其实还有许多酷炫的效果，来吸引访客眼球。

我已经将它写成一个插件的形式（其实就是个函数），[代码地址](https://github.com/zhoudaxia2016/effect-plugin/tree/master/carousel)。

下面还是按照我解决问题的顺序来讲好了：

1. 实现自动轮播
2. 实现停止与播放
3. 控制转到上一张或者下一张
4. 底部焦点

### 实现自动轮播

这是最基本的功能，其实只要用**CSS**也是完全可以实现的，因为还不需要交互。我们可以使用**overflow**属性与绝对定位来实现。我们来看一下基本的html结构：

<pre>
<code>
&lt;div class="carousel-wrap">
  &lt;!-- 图片列表 -->
  &lt;div class="carousel-container">
    &lt;div class="carousel-list">
    &lt;img class="carousel-item" src="1.jpg">
    &lt;img class="carousel-item" src="2.jpg">
    &lt;/div>
  &lt;/div>
  &lt;!-- 控制按钮 -->
  &lt;div class="carousel-btn" id="carousel-prev"></div>
  &lt;div class="carousel-btn" id="carousel-next"></div>
  &lt;!-- 焦点 -->
  &lt;div class="carousel-points"></div>
&lt;/div>
</code>
</pre>

我们先来关注图片列表。在图片外围，除了最外层的div，还用两个div包裹住了所有图片，理解它们的作用就能够理解轮播的原理了。

类名为**carousel-container**的div会设置**overflow**为**hidden**，宽高与图片（所有图片的宽高一样）一样。用来只显示一张图片，其他图片不会被显示。类名为**carousel-list**的div的宽会设置为图片数量乘以图片宽（实现水平播放），高为图片的高。这样只会显示第一张图片了。我们又将**carousel-container**设置为相对定位，**carousel-list**设置为绝对定位，通过改变left就能显示不同的图片了（再加上transition实现简单水平移动的动画）。

最后通过定时器，改变carousel-list的left属性，就实现了自动轮播。

### 停止与播放

这里的停止与播放是指当鼠标移动到图片上方时，停止轮播，当鼠标离开了图片就继续轮播。

这里可以使用图片的mouseover事件停止播放，mouseout事件继续播放。停止播放其实就是clearInterval定时器，继续播放就是重新调用setInterval。

> 可以不在图片上监听这两个事件，而在它们的父元素**carousel-list**上监听，这应该叫作事件代理吧。

### 控制播放

设两个按钮。当点击上一张时，left减少两个图片的宽度，那下次就会播放前一张图片了。当点击下一张时，马上播放下张，然后重置定时器。

控制播放不是很难的，麻烦的是还要控制按钮的显示——当鼠标移动到图片才显示按钮。详细情况可以看代码。

### 底部焦点

可以看一下淘宝与京东首页的轮播图，底部肯定都是有焦点的，如果是移动端页面，可能没有按钮，不过一般也是有焦点的。所以说这个应该是非常重要的，如果没有它，别人就会以为这只是一张简单的图片而已。点击焦点还能移动到对应图片。

我是在函数里面创建这些点的（因为一开始还不知道数量），然后给它们添加点击事件，通过left（每张图片的left是固定的）移动到某张图片。

### 总结

这个是我写的第一个插件（不知道算不算一个插件），用了最简单的方法——封装成一个函数。许多需要考虑的东西还没有考虑，还需要好好研究插件的编写！
